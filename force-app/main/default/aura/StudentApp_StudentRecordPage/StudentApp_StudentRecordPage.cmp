<!--
  @description       : 
  @author            : Tuan Tran
  @group             : 
  @last modified on  : 12-04-2022
  @last modified by  : Tuan Tran
-->
<aura:component
  implements="flexipage:availableForAllPageTypes,force:hasRecordId"
  access="global"
  controller="StudentApp_StudentController"
>
  <aura:attribute name="studentInfo" type="Object" />
  <aura:attribute name="requests" type="List" />
  <aura:attribute name="isModalOpen" type="Boolean" default="false" />
  <aura:handler name="init" value="{!this}" action="{!c.init}" />
  <aura:if isTrue="{!v.isModalOpen}">
    <c:SRS_NewRequestCmp isStudentAppInvoked="true"> </c:SRS_NewRequestCmp>
  </aura:if>
  <lightning:card
    title="Your Notifications"
    iconName="standard:contact"
    variant="base"
    class="slds-card_boundary"
  ></lightning:card>
  <lightning:card
    title="Your Requests"
    iconName="standard:contact"
    variant="base"
    class="slds-card_boundary"
  >
    <aura:set attribute="actions">
      <lightning:button
        class="slds-theme_neutral"
        variant="neutral"
        label="New"
        onclick="{!c.openNewModal}"
      >
      </lightning:button>
    </aura:set>
    <div class="slds-m-around_small">
      <table
        class="slds-table slds-no-row-hover slds-table_bordered slds-table_col-bordered"
      >
        <thead>
          <tr>
            <th>
              <div class="slds-truncate" title="Subject">Id</div>
            </th>
            <th>
              <div class="slds-truncate" title="Class">Request Title</div>
            </th>
            <th>
              <div class="slds-truncate" title="Homework">Status</div>
            </th>
            <th>
              <div class="slds-truncate" title="Mid-Term Exam">
                Submitted Date
              </div>
            </th>
            <th>
              <div class="slds-truncate" title="Final Exam">Received Date</div>
            </th>
          </tr>
        </thead>
        <tbody>
          <aura:iteration
            items="{!v.studentInfo.Requests__r.records}"
            var="item"
          >
            <tr class="slds-hint-parent">
              <td>
                <div style="font-size: 0.8125rem">
                  <p>
                    <a href="{! ('/' + item.Id) }" target="_blank"
                      >{!item.Name}</a
                    >
                  </p>
                </div>
              </td>
              <td>
                <div style="font-size: 0.8125rem">
                  <p>
                    <lightning:formattedText
                      value="{!item.Request_Header__c}"
                    />
                  </p>
                </div>
              </td>
              <td>
                <div style="font-size: 0.8125rem">
                  <p>
                    <lightning:formattedText value="{!item.Status__c}" />
                  </p>
                </div>
              </td>
              <td>
                <div style="font-size: 0.8125rem">
                  <p>
                    <lightning:formattedText
                      value="{!item.Submitting_Date__c}"
                    />
                  </p>
                </div>
              </td>
              <td>
                <div style="font-size: 0.8125rem">
                  <p></p>
                </div>
              </td>
            </tr>
          </aura:iteration>
        </tbody>
      </table>
    </div>
  </lightning:card>
</aura:component>
